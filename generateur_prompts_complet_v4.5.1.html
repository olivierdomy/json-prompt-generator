
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>G√©n√©rateur de Prompts ‚Äì v4.5.1</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; background-color: #f4f4f4; }
    form { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
    label { display: block; margin-top: 15px; font-weight: bold; }
    input, textarea, select { width: 100%; padding: 8px; margin-top: 5px; }
    button { margin-top: 20px; padding: 10px 15px; border: none; background: #0057a3; color: white; cursor: pointer; }
    h2 { border-bottom: 1px solid #ccc; padding-bottom: 5px; margin-top: 30px; }
    .instruction { border-left: 5px solid #0057a3; margin-top: 15px; padding-left: 10px; background: #fdfdfd; padding: 10px; border-radius: 5px; }
  </style>
</head>
<body>

<h1>G√©n√©rateur de Prompts ‚Äì v4.5.1</h1>
<form id="promptForm">

  <h2>Comportement de l‚ÄôIA</h2>
  <div class="instruction">
    <label for="reasoningLevel">Niveau de raisonnement :</label>
    <select id="reasoningLevel">
      <option value=""></option>
      <option value="Automatique">Automatique ‚Äì Analyse simple des faits</option>
      <option value="Rapide">Rapide ‚Äì Traitement direct avec logique √©l√©mentaire</option>
      <option value="√âlev√©">√âlev√© ‚Äì Analyse avec encha√Ænement logique structur√©</option>
      <option value="Expert (multi-√©tapes)">Expert (multi-√©tapes) ‚Äì Raisonnement approfondi avec √©tapes interm√©diaires</option>
    </select>

    <label for="factuality">Fiabilit√© des donn√©es :</label>
    <select id="factuality">
      <option value=""></option>
      <option value="Cr√©atif (peut inventer)">Cr√©atif (peut inventer) ‚Äì L'IA peut combler les manques</option>
      <option value="Interm√©diaire">Interm√©diaire ‚Äì Peut extrapoler l√©g√®rement</option>
      <option value="Raisonn√© (aucune donn√©e non v√©rifi√©e)">Raisonn√© (aucune donn√©e non v√©rifi√©e)</option>
      <option value="Strictement factuel">Strictement factuel ‚Äì Aucune invention ou inf√©rence</option>
    </select>

    <label for="compliance">Rigueur de conformit√© :</label>
    <select id="compliance">
      <option value=""></option>
      <option value="Cr√©atif">Cr√©atif ‚Äì Peut ignorer les r√®gles pour innover</option>
      <option value="V√©rification l√©g√®re">V√©rification l√©g√®re ‚Äì Respect des grandes lignes</option>
      <option value="Contr√¥le par r√®gles">Contr√¥le par r√®gles ‚Äì Conformit√© stricte aux attentes</option>
      <option value="Sans compromis r√©glementaire">Sans compromis r√©glementaire ‚Äì Z√©ro tol√©rance au hors cadre</option>
    </select>

    <label for="depth">Profondeur d‚Äôanalyse :</label>
    <select id="depth">
      <option value=""></option>
      <option value="Superficielle">Superficielle ‚Äì Vue synth√©tique</option>
      <option value="Standard">Standard ‚Äì R√©ponses √©quilibr√©es</option>
      <option value="Approfondie">Approfondie ‚Äì Avec justifications</option>
      <option value="Exhaustive">Exhaustive ‚Äì Tous les aspects en d√©tail</option>
    </select>

    <label for="autonomy">üîÅ Degr√© d‚Äôautonomie :</label>
    <select id="autonomy">
      <option value=""></option>
      <option value="Aucune (r√©pond uniquement sur faits)">Aucune</option>
      <option value="Faible (suggestions ponctuelles)">Faible</option>
      <option value="Mod√©r√©e (initie des propositions argument√©es)">Mod√©r√©e</option>
      <option value="Maximale (autoris√© √† reformuler, extrapoler ou combler les manques)">Maximale</option>
    </select>

    <label for="reformulation">üß† Capacit√© de reformulation :</label>
    <select id="reformulation">
      <option value=""></option>
      <option value="Texte brut uniquement">Texte brut uniquement</option>
      <option value="Reformulation l√©g√®re (lisibilit√©)">L√©g√®re</option>
      <option value="Reformulation optimis√©e (impact, clart√©)">Optimis√©e</option>
      <option value="Libre (style √©ditorial, mise en r√©cit, persuasion)">Libre</option>
    </select>

    <label for="uncertainty">üß© Gestion des incertitudes :</label>
    <select id="uncertainty">
      <option value=""></option>
      <option value="Ne pas r√©pondre">Ne pas r√©pondre</option>
      <option value="√âmettre des hypoth√®ses (signal√©es)">Hypoth√®ses</option>
      <option value="Proposer des alternatives">Alternatives</option>
      <option value="Remonter des questions √† poser au client">Questions client</option>
    </select>
  </div>

  <h2>üìå M√©tadonn√©es</h2>
  <label>Nom du prompt :</label><input id="promptName" required>
  <label>#Objectif :</label><textarea id="mainObjective" rows="2" required></textarea>
  <label>#Contexte :</label><textarea id="context" rows="2"></textarea>
  <label>#R√¥le :</label><input id="globalRole">
  <h3>üñºÔ∏è Image par d√©faut (optionnelle)</h3>
  <label>Concept de l‚Äôimage :</label><input id="imageConcept">
  <label>Fit :</label><input id="imageFit" placeholder="ex: cover_or_contain_preserve_crop">
  <label>Style artistique :</label><input id="imageStyle" placeholder="ex: BD ligne claire">

  <h2>üìã Instructions</h2>
  <div id="instructionsContainer"></div>
  <button type="button" onclick="addInstruction()">+ Ajouter une instruction</button>
  <button type="submit">‚úÖ G√©n√©rer JSON</button>
  <button type="button" onclick="downloadJSON()">üì• T√©l√©charger JSON</button>
  <button type="button" onclick="downloadTXT()">üìÑ T√©l√©charger TXT</button>
</form>

<h2>üßæ Aper√ßu JSON</h2>
<pre id="jsonPreview"></pre>

<script>
let instructionIndex = 0;
let latestJson = "";

function addInstruction() {
  instructionIndex++;
  const c = document.getElementById("instructionsContainer");
  const d = document.createElement("div");
  d.className = "instruction";
  d.innerHTML = `
    <label>Action ${instructionIndex} :</label><textarea id="action${instructionIndex}"></textarea>
    <label>Format :</label><input id="format${instructionIndex}">
    <label>Exemple :</label><textarea id="example${instructionIndex}"></textarea>
    <label>V√©rifications :</label><textarea id="verif${instructionIndex}"></textarea>
    <label><input type="checkbox" class="generateImage"> G√©n√©rer une image IA pour cette action</label>
  `;
  c.appendChild(d);
}

document.getElementById("promptForm").addEventListener("submit", function (e) {
  e.preventDefault();
  const ai_profile = {
    reasoning_level: document.getElementById("reasoningLevel").value,
    factuality: document.getElementById("factuality").value,
    compliance: document.getElementById("compliance").value,
    depth: document.getElementById("depth").value,
    autonomy: document.getElementById("autonomy").value,
    reformulation: document.getElementById("reformulation").value,
    uncertainty: document.getElementById("uncertainty").value
  };
  const metadata = {
    prompt_name: document.getElementById("promptName").value,
    objectifPrincipal: document.getElementById("mainObjective").value,
    contexte: document.getElementById("context").value,
    role: document.getElementById("globalRole").value,
    image_policy: {
      concept: document.getElementById("imageConcept").value,
      fit: document.getElementById("imageFit").value,
      style_hint: document.getElementById("imageStyle").value
    }
  };
  const timeline = [];
  for (let i = 1; i <= instructionIndex; i++) {
    const generate = document.getElementsByClassName("generateImage")[i - 1]?.checked || false;
    timeline.push({
      sequence: i,
      action: document.getElementById("action" + i)?.value || "",
      format: document.getElementById("format" + i)?.value || "",
      exemple: document.getElementById("example" + i)?.value || "",
      verifications: document.getElementById("verif" + i)?.value || "",
      generate_image: generate
    });
  }
  const output = { ai_profile, metadata, timeline };
  latestJson = JSON.stringify(output, null, 2);
  document.getElementById("jsonPreview").textContent = latestJson;
});

function downloadJSON() {
  if (!latestJson) return alert("Rien √† sauvegarder.");
  const blob = new Blob([latestJson], { type: "application/json" });
  const a = document.createElement("a");
  a.href = URL.createObjectURL(blob);
  a.download = "prompt-" + new Date().toISOString().slice(0,10) + ".json";
  a.click();
}

function downloadTXT() {
  if (!latestJson) return alert("G√©n√®re d'abord un prompt.");
  const obj = JSON.parse(latestJson);
  let txt = `üéØ Objectif : ${obj.metadata.objectifPrincipal}
`;
  txt += `üìÇ Contexte : ${obj.metadata.contexte}
`;
  txt += `üë§ R√¥le : ${obj.metadata.role}
`;
  txt += `üñºÔ∏è Image : ${obj.metadata.image_policy.concept} | ${obj.metadata.image_policy.fit} | ${obj.metadata.image_policy.style_hint}
`;
  txt += `ü§ñ Comportement IA :
`;
  for (const [k, v] of Object.entries(obj.ai_profile)) {
    txt += `   - ${k} : ${v}
`;
  }
  txt += `
üìã Instructions :
`;
  for (const s of obj.timeline) {
    txt += `
üîπ ${s.sequence}. ${s.action}
   ‚û§ Format : ${s.format}
   ‚û§ Exemple : ${s.exemple}
   ‚û§ V√©rifications : ${s.verifications}
   ‚û§ Image IA : ${s.generate_image ? "Oui" : "Non"}
`;
  }
  const blob = new Blob([txt], { type: "text/plain" });
  const a = document.createElement("a");
  a.href = URL.createObjectURL(blob);
  a.download = "prompt-" + new Date().toISOString().slice(0,10) + ".txt";
  a.click();
}
</script>

</body>
</html>
